!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var e=function(e){"string"==typeof e&&(e=new Date(e));var t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),a.getTimezoneOffset()),i=e.getTimezoneOffset()<n,l=i?n-60:n,r=l>=0?"-":"+";return r+("0"+l/60).slice(-2)+":"+("0"+l%60).slice(-2)},t=function(e,t,a){var n=a("DatetimePickerCtrl");return{open:function(e){n.openDatetimePicker(e)},close:function(){n.closeDatetimePicker()}}};t.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",t);var a=function(e,t){var a,n=this,i=function(e){e&&e.remove(),t[0].body.removeEventListener("click",n.closeDatetimePicker)};this.openDatetimePicker=function(n){this.closeDatetimePicker();var i=angular.element("<div datetime-picker-popup ng-cloak></div");n.dateFormat&&i.attr("date-format",n.dateFormat),n.ngModel&&i.attr("ng-model",n.ngModel),n.year&&i.attr("year",parseInt(n.year)),n.month&&i.attr("month",parseInt(n.month)),n.day&&i.attr("day",parseInt(n.day)),n.hour&&i.attr("hour",parseInt(n.hour)),n.minute&&i.attr("minute",parseInt(n.minute)),(""===n.dateOnly||n.dateOnly===!0)&&i.attr("date-only","true"),"false"===n.closeOnSelect&&i.attr("close-on-select","false");var l=n.triggerEl;n.scope=n.scope||angular.element(l).scope(),a=e(i)(n.scope)[0],a.triggerEl=n.triggerEl,t[0].body.appendChild(a);var r=l.getBoundingClientRect();a.style.position="absolute",a.style.left=r.left+window.scrollX+"px",r.top<300||window.innerHeight-r.bottom>300?a.style.top=r.bottom+window.scrollY+"px":a.style.bottom=window.innerHeight-r.top+window.scrollY+"px",n.scope.$applyAsync(),t[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(e){var a=e&&e.target,n=t[0].querySelector("div[datetime-picker-popup]");e&&a?a.hasAttribute("datetime-picker")||n&&n.contains(a)||i(n):i(n)}};a.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",a);var n=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ','      ng-class="{selected: (day == selectedDay)}">{{::day}}</div>','    <div class="adp-day" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" ng-show="::!dateOnly"> ','    Time : {{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}} <br/>','    <label>Hour:</label> <input type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel()" />','    <label>Min.:</label> <input type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel()"/> ',"  </div> ","</div>"].join("\n"),i=function(t,a){var i,l,r,o,c=function(){i=[],l=[],r=[],o=0;for(var e=1;31>=e;e++)i.push(e);for(var e=0;12>e;e++)l.push({fullName:t.DATETIME_FORMATS.MONTH[e],shortName:t.DATETIME_FORMATS.SHORTMONTH[e]});for(var e=0;7>e;e++){var a=t.DATETIME_FORMATS.DAY[(e+o)%7];r.push({fullName:a,firstLetter:a.substr(0,2)})}o=t.DATETIME_FORMATS.FIRSTDAYOFWEEK||0},s=function(e,t){t=(t+12)%12;var a=new Date(e,t,1),n=new Date(e,t+1,0),l=new Date(e,t,0),r=n.getDate(),c=l.getDate(),s=a.getDay(),d=(s-o+7)%7||7,u=i.slice(0,42-(d+r));return u.length>7&&(u=u.slice(0,u.length-7)),{year:e,month:t,days:i.slice(0,r),leadingDays:i.slice(-d-(31-c),c),trailingDays:u}},d=function(t,n,i,o){c();var d=i.dateFormat||"short";t.months=l,t.daysOfWeek=r,t.inputHour,t.inputMinute,t.$applyAsync(function(){if(o.triggerEl=angular.element(n[0].triggerEl),i.ngModel){var a=o.triggerEl.scope().$eval(i.ngModel);if(a){a.match(/[0-9]{2}:/)||(a+=" 00:00:00"),a=a.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2"),a=a.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),a=a.replace(/\s*\(\)\s*/,""),a=a.replace(/[\-\+][0-9]{2}:?[0-9]{2}/,""),a+=e(a);var l=new Date(a);t.selectedDate=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds())}}if(!t.selectedDate||isNaN(t.selectedDate.getTime())){var r=new Date,c=t.year||r.getFullYear(),d=t.month?t.month-1:r.getMonth(),u=t.day||r.getDate(),m=t.hour||r.getHours(),g=t.minute||r.getMinutes();t.selectedDate=new Date(c,d,u,m,g,0)}t.inputHour=t.selectedDate.getHours(),t.inputMinute=t.selectedDate.getMinutes(),t.mv=s(t.selectedDate.getFullYear(),t.selectedDate.getMonth()),t.selectedDay=t.mv.year==t.selectedDate.getFullYear()&&t.mv.month==t.selectedDate.getMonth()?t.selectedDate.getDate():null}),t.addMonth=function(e){t.mv=s(t.mv.year,t.mv.month+e)},t.setDate=function(e){var a=angular.element(e.target)[0];a.className.indexOf("selectable")&&(t.updateNgModel(parseInt(a.innerHTML)),t.closeOnSelect!==!1&&o.closeDatetimePicker())},t.updateNgModel=function(e){if(e=e?e:t.selectedDate.getDate(),t.selectedDate=new Date(t.mv.year,t.mv.month,e,t.inputHour,t.inputMinute,0),t.selectedDay=t.selectedDate.getDate(),i.ngModel){var n=o.triggerEl.scope();n.$eval(i.ngModel+'="'+a(t.selectedDate,d)+'"')}},t.$on("$destroy",o.closeDatetimePicker)};return{restrict:"A",template:n,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"="},link:d}};i.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",i);var l=function(e,t){return{link:function(e,a,n){a[0].addEventListener("click",function(){t.open({triggerEl:a[0],dateFormat:n.dateFormat,ngModel:n.ngModel,year:n.year,month:n.month,day:n.day,hour:n.hour,minute:n.minute,dateOnly:n.dateOnly,closeOnSelect:n.closeOnSelect})})}}};l.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",l)}();